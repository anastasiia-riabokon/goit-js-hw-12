{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/icon-error.svg","../src/main.js"],"sourcesContent":["export function searchPhoto(query) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const API_KEY = '43980241-153c3487497bc06835a433946';\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  const url = `${BASE_URL}${END_POINT}?${params}`;\n\n  return fetch(url).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n    }\n    return res.json();\n  });\n}\n","export function photoTemplate(obj) {\n  return `<div class=\"gallery-item\">\n  <a href=\"${obj.largeImageURL}\">\n    <img src=\"${obj.webformatURL}\" alt=\"${obj.tags}\" loading=\"lazy\"/>\n  </a>\n  <ul class=\"block-info\">\n    <li>\n      <p style=\"font-weight: 600\">Likes</p>\n      <p>${obj.likes}</p>\n    </li>\n\n    <li>\n      <p style=\"font-weight: 600\">Views</p>\n      <p>${obj.views}</p>\n    </li>\n\n    <li>\n      <p style=\"font-weight: 600\">Comments</p>\n      <p>${obj.comments}</p>\n    </li>\n\n    <li>\n      <p style=\"font-weight: 600\">Downloads</p>\n      <p>${obj.downloads}</p>\n    </li>\n  </ul>\n</div>`;\n}\n\nexport function photosTemplate(arr) {\n  return arr.map(photoTemplate).join('');\n}\n","export default \"__VITE_ASSET__eb775c6f__\"","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport './css/loader.css';\n\nimport './js/pixabay-api';\nimport './js/render-functions';\n\nimport iconError from './img/icon-error.svg';\nimport { searchPhoto } from './js/pixabay-api';\nimport { photosTemplate } from './js/render-functions';\n\nconst ref = {\n  form: document.querySelector('.js-form'),\n  containerImg: document.querySelector('.js-container-images'),\n  body: document.body,\n  cssLoader: document.querySelector('.js-loader'),\n};\n\nconst lightbox = new SimpleLightbox('.js-container-images a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionClass: 'caption-text',\n});\n\nref.form.addEventListener('submit', handleSubmitPhotoRequest);\n\nfunction handleSubmitPhotoRequest(event) {\n  event.preventDefault();\n  ref.body.style.height = '100vh';\n  ref.containerImg.innerHTML = '';\n\n  let query = event.target.elements.query.value.trim();\n\n  if (query === '') {\n    message('Fill in the field!');\n\n    return;\n  }\n\n  query = query.replaceAll(' ', '+');\n\n  showLoader();\n\n  searchPhoto(query)\n    .then(data => {\n      if (data.hits.length === 0) {\n        message(\n          'Sorry, there are no images matching your<br> search query. Please, try again!'\n        );\n      } else {\n        const markup = photosTemplate(data.hits);\n        ref.containerImg.innerHTML = markup;\n        if (data.hits.length < 4) {\n          ref.body.style.height = '100vh';\n        } else ref.body.style.height = '100%';\n        lightbox.refresh();\n      }\n    })\n    .catch(error => {\n      message('An error occurred. Please try again later.', error);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n  event.target.reset();\n}\n\nfunction showLoader() {\n  ref.cssLoader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  ref.cssLoader.style.display = 'none';\n}\n\nfunction message(text, title = null) {\n  const toastParams = {\n    message: text,\n    backgroundColor: '#EF4040',\n    iconUrl: iconError,\n    timeout: 5000,\n    closeOnEscape: true,\n    transitionIn: 'fadeInLeft',\n    transitionOut: 'fadeOutUp',\n    titleSize: '16',\n    titleLineHeight: '24',\n    messageSize: '16',\n    messageLineHeight: '24',\n    titleColor: '#FFF',\n    messageColor: '#FFF',\n    position: 'topRight',\n  };\n  if (title !== null) {\n    toastParams.title = `${title}`;\n  }\n\n  iziToast.show(toastParams);\n}\n"],"names":["searchPhoto","query","BASE_URL","END_POINT","API_KEY","params","url","res","photoTemplate","obj","photosTemplate","arr","iconError","ref","lightbox","SimpleLightbox","handleSubmitPhotoRequest","event","message","showLoader","data","markup","error","hideLoader","text","title","toastParams","iziToast"],"mappings":"6vBAAO,SAASA,EAAYC,EAAO,CACjC,MAAMC,EAAW,sBACXC,EAAY,QACZC,EAAU,qCACVC,EAAS,IAAI,gBAAgB,CACjC,IAAKD,EACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAEKK,EAAM,GAAGJ,CAAQ,GAAGC,CAAS,IAAIE,CAAM,GAE7C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAO,CAC5B,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE5B,OAAOA,EAAI,MACf,CAAG,CACH,CCpBO,SAASC,EAAcC,EAAK,CACjC,MAAO;AAAA,aACIA,EAAI,aAAa;AAAA,gBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,WAKvCA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,WAKTA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,WAKTA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,WAKZA,EAAI,SAAS;AAAA;AAAA;AAAA,OAIxB,CAEO,SAASC,EAAeC,EAAK,CAClC,OAAOA,EAAI,IAAIH,CAAa,EAAE,KAAK,EAAE,CACvC,CC/BA,MAAeI,EAAA,gDCcTC,EAAM,CACV,KAAM,SAAS,cAAc,UAAU,EACvC,aAAc,SAAS,cAAc,sBAAsB,EAC3D,KAAM,SAAS,KACf,UAAW,SAAS,cAAc,YAAY,CAChD,EAEMC,EAAW,IAAIC,EAAe,yBAA0B,CAC5D,aAAc,MACd,gBAAiB,SACjB,aAAc,cAChB,CAAC,EAEDF,EAAI,KAAK,iBAAiB,SAAUG,CAAwB,EAE5D,SAASA,EAAyBC,EAAO,CACvCA,EAAM,eAAc,EACpBJ,EAAI,KAAK,MAAM,OAAS,QACxBA,EAAI,aAAa,UAAY,GAE7B,IAAIZ,EAAQgB,EAAM,OAAO,SAAS,MAAM,MAAM,OAE9C,GAAIhB,IAAU,GAAI,CAChBiB,EAAQ,oBAAoB,EAE5B,MACD,CAEDjB,EAAQA,EAAM,WAAW,IAAK,GAAG,EAEjCkB,IAEAnB,EAAYC,CAAK,EACd,KAAKmB,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EACvBF,EACE,+EACV,MACa,CACL,MAAMG,EAASX,EAAeU,EAAK,IAAI,EACvCP,EAAI,aAAa,UAAYQ,EACzBD,EAAK,KAAK,OAAS,EACrBP,EAAI,KAAK,MAAM,OAAS,QACnBA,EAAI,KAAK,MAAM,OAAS,OAC/BC,EAAS,QAAO,CACjB,CACP,CAAK,EACA,MAAMQ,GAAS,CACdJ,EAAQ,6CAA8CI,CAAK,CACjE,CAAK,EACA,QAAQ,IAAM,CACbC,GACN,CAAK,EACHN,EAAM,OAAO,OACf,CAEA,SAASE,GAAa,CACpBN,EAAI,UAAU,MAAM,QAAU,OAChC,CAEA,SAASU,GAAa,CACpBV,EAAI,UAAU,MAAM,QAAU,MAChC,CAEA,SAASK,EAAQM,EAAMC,EAAQ,KAAM,CACnC,MAAMC,EAAc,CAClB,QAASF,EACT,gBAAiB,UACjB,QAASZ,EACT,QAAS,IACT,cAAe,GACf,aAAc,aACd,cAAe,YACf,UAAW,KACX,gBAAiB,KACjB,YAAa,KACb,kBAAmB,KACnB,WAAY,OACZ,aAAc,OACd,SAAU,UACd,EACMa,IAAU,OACZC,EAAY,MAAQ,GAAGD,CAAK,IAG9BE,EAAS,KAAKD,CAAW,CAC3B"}