import{a as b,S,i as f}from"./assets/vendor-c493984e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const g of a.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();b.defaults.baseURL="https://pixabay.com";const q={query:"",perPage:15,maxPage:1,currentPage:1};async function L(e,t){const o="43980241-153c3487497bc06835a433946";return(await b.get("/api/",{params:{key:o,q:e,image_type:"photo",orientation:"horizontal",safesearch:"true",per_page:15,page:t}})).data}function x(e){return`<div class="gallery-item">
  <a href="${e.largeImageURL}">
    <img src="${e.webformatURL}" alt="${e.tags}" loading="lazy"/>
  </a>
  <ul class="block-info">
    <li>
      <p style="font-weight: 600">Likes</p>
      <p>${e.likes}</p>
    </li>

    <li>
      <p style="font-weight: 600">Views</p>
      <p>${e.views}</p>
    </li>

    <li>
      <p style="font-weight: 600">Comments</p>
      <p>${e.comments}</p>
    </li>

    <li>
      <p style="font-weight: 600">Downloads</p>
      <p>${e.downloads}</p>
    </li>
  </ul>
</div>`}function I(e){return e.map(x).join("")}function v(e,t){const o=I(t);e.insertAdjacentHTML("beforeend",o)}function $(e,t){let o='<li data-type="prev" class="pagination-item btn">&laquo;</li>',r=1,n=t;t>7&&(e>4&&(o+='<li class="dots">&nbsp;. . .&nbsp;</li>',r=e-2),e<t-3&&(n=e+2));for(let a=r;a<=n;a+=1)o+=`<li data-type="page" data-page="${a}" class="pagination-item btn ${e===a?"active":""}">${a}</li>`;return n<t&&(o+='<li class="dots">&nbsp;. . .&nbsp;</li>'),o+='<li data-type="next" class="pagination-item btn">&raquo;</li>',o}const H="/goit-js-hw-12/assets/icon-error-9956cb73.svg";let{query:c,perPage:w,maxPage:p,currentPage:s}=q,m;const i={form:document.querySelector(".js-form"),containerImg:document.querySelector(".js-container-images"),body:document.body,cssLoader:document.querySelector(".js-loader"),btnLoadMore:document.querySelector(".js-btn-load-more"),pagination:document.querySelector(".js-pagination")},E=new S(".js-container-images a",{captionsData:"alt",captionPosition:"bottom",captionClass:"caption-text"});i.form.addEventListener("submit",O);i.btnLoadMore.addEventListener("click",k);i.pagination.addEventListener("click",T);function O(e){e.preventDefault();const t=e.target;if(i.body.style.height="100vh",i.containerImg.innerHTML="",l(i.btnLoadMore),s=1,c=t.elements.query.value.trim(),c===""){u({text:"Fill in the field!"});return}c=c.replaceAll(" ","+"),h(c),t.reset()}async function h(e){d(i.cssLoader),l(i.btnLoadMore),l(i.pagination);try{const t=await L(e,s);!t.hits||t.hits.length===0?u({text:"Sorry, there are no images matching your<br> search query. Please, try again!"}):(p=Math.ceil(t.totalHits/w),m=t.hits,v(i.containerImg,t.hits),d(i.pagination),P(s,p),d(i.btnLoadMore),t.hits.length<4?(i.body.style.height="100vh",l(i.btnLoadMore)):i.body.style.height="100%",E.refresh())}catch(t){u({text:"An error occurred. Please try again later.",title:`Error ${t.status}:`})}finally{l(i.cssLoader)}M()}function M(){if(s>=p){if(l(i.btnLoadMore),m.length<4)return;u({text:"We're sorry, but you've reached the end of search results.",type:"info"})}}async function k(){l(i.btnLoadMore),d(i.cssLoader),l(i.pagination);try{s+=1;const e=await L(c,s);v(i.containerImg,e.hits),d(i.pagination),d(i.btnLoadMore),F(),P(s,p),E.refresh()}catch(e){console.log(e)}finally{l(i.cssLoader)}M(),l(i.pagination)}function d(e){e.classList.remove("visually-hidden")}function l(e){e.classList.add("visually-hidden")}function u({text:e,title:t=null,type:o="error"}){switch(f.settings({timeout:5e3,closeOnEscape:!0,transitionIn:"fadeInLeft",transitionOut:"fadeOutUp",titleSize:"16",titleLineHeight:"24",messageSize:"16",messageLineHeight:"24",position:"topRight"}),o){case"info":f.info({message:e}),document.querySelector(".iziToast-close").classList.add("custom-close");break;default:const n={message:e,backgroundColor:"#EF4040",iconUrl:H,titleColor:"#FFF",messageColor:"#FFF"};t!==null&&(n.title=`${t}`),f.show(n)}}function F(){const t=document.querySelector(".gallery-item").getBoundingClientRect().height;window.scrollBy({top:t*2,behavior:"smooth"})}function T(e){const t=i.pagination.querySelector(".active"),o=e.target;if(o.dataset.type==="page"){const r=parseInt(o.dataset.page);r!==s&&(s=r,i.containerImg.innerHTML="",i.body.style.height="100vh",h(c))}o.dataset.type==="prev"&&t.previousElementSibling.dataset.type==="page"&&y(o,t),o.dataset.type==="next"&&t.nextElementSibling.dataset.type==="page"&&y(o,t)}function y(e,t){if(t.classList.remove("active"),e.dataset.type==="page"){e.classList.add("active");return}e.dataset.type==="next"?(t.nextElementSibling.classList.add("active"),s+=1):(t.previousElementSibling.classList.add("active"),s-=1),!(s<1||s>=p)&&(i.containerImg.innerHTML="",i.body.style.height="100vh",h(c))}function P(e,t){m.length>w-1?i.pagination.innerHTML=$(e,t):i.pagination.innerHTML=""}
//# sourceMappingURL=commonHelpers.js.map
